import{d as Ma,c as s,g as T,h as f,F as g,p as Da,r as b,i as Ea,q as Ia,s as za,u as Fa,o,b as t,w as v,j as y,t as d,k as P,a as D,m as ca,f as z,v as F,n as k,e as R}from"./runtime-dom.esm-bundler.CUj3j_Ug.js";import{S as h}from"./sweetalert2.esm.all.NNS-RXd7.js";import{u as Ra,B as Ga,T as Oa,a as Ja}from"./usePagination.CClfIzvj.js";import{_ as Wa}from"./_plugin-vue_export-helper.DlAUqK2U.js";const V="/api/backend/layanan",qa=Ma({__name:"data",props:{level:{},idUnitKerja:{}},setup(Z,{expose:n}){n();const p=Z,a=Da(()=>p.level==="3"),$=[{key:"status_nama",label:"Nama layanan sudah jelas"},{key:"status_jenis",label:"Jenis layanan sesuai"},{key:"status_kanal",label:"Kanal layanan sesuai"},{key:"status_sla",label:"SLA wajar"}],aa=[{value:"Web"},{value:"Mobile"},{value:"Whatsapp"},{value:"Loket"},{value:"Email"}],e=b([]),L=b([]),j=b([]),G=b([]),x=b(!1),O=b(!1),E=b("Tambah Layanan"),A=b(""),_=b(null),ma=[10,25,50,100],fa=[{value:"",label:"Pilih Status Layanan"},{value:"Aktif",label:"Aktif"},{value:"Tidak Aktif",label:"Non Aktif"}];let w=null;function J(){if(typeof window>"u")return null;const l=window.jQuery;return!l||!l.fn||!l.fn.select2?null:l}function W(l){return Array.isArray(l)?l.length?String(l[0]??""):"":l==null?"":String(l)}function q(l){const i=l.attr("data-form-field");if(!i)return;const r=W(l.val());if(i==="id_unit_kerja"){u.value.id_unit_kerja=r===""?null:Number(r);return}if(i==="jenis"){u.value.jenis=r;return}if(i==="kanal"){u.value.kanal=r;return}i==="status_layanan"&&(u.value.status_layanan=r)}function ta(l){if(l.attr("data-search-field")!=="unit_kerja")return;const r=W(l.val());if(r===""||r==="null"||r==="undefined"){_.value!==null&&(_.value=null);return}const m=Number(r);Number.isFinite(m)&&_.value!==m&&(_.value=m)}function ea(l){[["#modal-select-unit-kerja",u.value.id_unit_kerja==null?"":String(u.value.id_unit_kerja)],["#modal-select-jenis",u.value.jenis??""],["#modal-select-kanal",u.value.kanal??""],["#modal-select-status",u.value.status_layanan??""]].forEach(([r,m])=>{const c=l(r);c.length&&(c.val(m),c.data("select2")&&c.trigger("change.select2"))})}function H(){const l=J();return l?(l(".js-select2").each((r,m)=>{const c=l(m),K=c.closest(".modal"),I={width:"resolve",dropdownAutoWidth:!0};K.length&&(I.dropdownParent=K),c.data("select2")||c.select2(I),c.off("change.select2-sync"),c.attr("data-form-field")?(c.on("change.select2-sync",()=>{q(c)}),q(c)):c.attr("data-search-field")&&c.on("change.select2-sync",()=>{ta(c)})}),ea(l),!0):!1}function M(){typeof window>"u"||Fa(()=>{if(H()||w!=null)return;let i=0;w=window.setInterval(()=>{i+=1,(H()||i>=10)&&w!=null&&(window.clearInterval(w),w=null)},300)})}function na(){const l=J();l&&l(".js-select2").each((i,r)=>{const m=l(r);m.data("select2")&&m.select2("destroy")})}function ga(l){const i=(l||"").toLowerCase().trim();return i.includes("revisi")?"bg-secondary text-dark":i.includes("tolak")||i.includes("ditolak")?"bg-danger":i.includes("aktif")||i.includes("setuju")?"bg-success":"bg-secondary"}function ya(l){const i=(l||"").toLowerCase().trim();return i.includes("revisi")?"REVISI":i.includes("tolak")||i.includes("ditolak")?"DITOLAK":i.includes("aktif")||i.includes("setuju")?"DISETUJUI":l?l.toUpperCase():"-"}const la={id:null,nama:"",jenis:"",kanal:"",sla_hari:"",status_layanan:"Menunggu Validasi",id_unit_kerja:p.idUnitKerja??null,status_jenis:"",status_kanal:"",status_sla:"",status_nama:"",catatan:""},u=b({...la}),{page:ba,pageSize:va,totalPages:ka,pageStartIndex:_a,pagedItems:ha,pages:wa,goFirst:pa,goPrev:ja,goNext:xa,goLast:Sa,goTo:La}=Ra(e,{pageSize:10}),Q=b(null),Y=b(null);Ea(()=>{!a.value&&p.idUnitKerja!=null&&(_.value=Number(p.idUnitKerja)),B(A.value.trim(),_.value),sa(),oa(),M()}),Ia(()=>{w!=null&&typeof window<"u"&&(window.clearInterval(w),w=null),na()});async function C(l,i={}){const r=await fetch(l,{credentials:"include",...i});if(!r.ok)throw new Error(await r.text());return await r.json()}function N(l){u.value={id:l?.id??null,nama:l?.nama??"",jenis:l?.jenis??"",kanal:l?.kanal??"",sla_hari:l?.sla_hari??"",status_nama:l?.status_nama??"",status_jenis:l?.status_jenis??"",status_kanal:l?.status_kanal??"",status_sla:l?.status_sla??"",catatan:l?.catatan??"",status_layanan:l?.status_layanan??"Menunggu Validasi",id_unit_kerja:l?.id_unit_kerja??p.idUnitKerja??null},M()}function Ca(l){const i=(l||"").toLowerCase().trim();return i.includes("menunggu")?"bg-warning":i==="aktif"?"bg-success":i==="revisi"||i==="revisi"?"bg-secondary":i==="ditolak"?"bg-danger":"bg-secondary"}async function B(l="",i=null){x.value=!0;try{const r=new URL(V,window.location.origin);l&&r.searchParams.set("search",l),i!=null&&r.searchParams.set("id_unit_kerja",String(i));const m=await C(r.toString());e.value=Array.isArray(m)?m:[]}catch(r){console.error("Gagal memuat Data Layanan:",r),e.value=[]}finally{x.value=!1}}async function ia(l=null){x.value=!0;try{const i=new URL("/api/backend/riwayat_layanan",window.location.origin);l&&i.searchParams.set("id_layanan",String(l)),j.value=await C(i.toString()),console.log(j.value)}catch(i){console.error("Gagal memuat Data Layanan:",i)}finally{x.value=!1}}async function sa(){x.value=!0;try{const l=new URL("/api/backend/kategori",window.location.origin);L.value=await C(l.toString()),M()}catch(l){console.error("Gagal memuat Data Layanan:",l)}finally{x.value=!1}}async function oa(){x.value=!0;try{const l=new URL("/api/backend/unit_kerja",window.location.origin);G.value=await C(l.toString()),M()}catch(l){console.error("Gagal memuat Data Layanan:",l)}finally{x.value=!1}}function Ua(){B(A.value.trim(),_.value)}za(_,()=>{B(A.value.trim(),_.value)});function X(){Q?.value?.show()}function ra(){Q?.value?.hide()}function da(){Y?.value?.show()}function Ta(){Y?.value?.hide()}function Pa(){E.value="Tambah Layanan",N(),X()}function Ba(l){E.value="Validasi Layanan",da(),N(l),j.value=[],ia(l.id)}async function Ka(l){E.value="Edit Layanan",N(),X();try{const i=await C(`${V}?id=${l}`);N(i)}catch(i){console.error("Gagal memuat detail:",i),h.fire({icon:"error",title:"Oops",text:"Gagal memuat detail."})}}async function Na(l){h.fire({icon:"warning",title:"Peringatan",text:"Anda yakin ingin menghapus Layanan ini?",showCancelButton:!0,confirmButtonText:"Ya, hapus",cancelButtonText:"Tidak"}).then(async i=>{if(i.isConfirmed)try{await C(`${V}?id=${l}`,{method:"DELETE"}),h.fire({icon:"success",title:"Berhasil",text:"Layanan berhasil dihapus."}),!a.value&&p.idUnitKerja!=null?await B("",Number(p.idUnitKerja)):await B()}catch{h.fire({icon:"error",title:"Oops",text:"Gagal menghapus Layanan."})}})}async function Va(){const l=(u.value.nama??"").trim(),i=(u.value.jenis??"").trim(),r=(u.value.kanal??"").trim(),m=String(u.value.sla_hari??"").trim(),c=(u.value.status_layanan??"").trim(),K=u.value.id_unit_kerja,I=G.value.find(U=>U.id===K);if(!l){await h.fire({icon:"warning",title:"Validasi",text:"Layanan tidak boleh kosong."});return}if(!i){await h.fire({icon:"warning",title:"Validasi",text:"Jenis layanan wajib dipilih."});return}if(!r){await h.fire({icon:"warning",title:"Validasi",text:"Kanal layanan wajib dipilih."});return}if(!m){await h.fire({icon:"warning",title:"Validasi",text:"Penyelesaian wajib diisi."});return}if(a.value&&K==null){await h.fire({icon:"warning",title:"Validasi",text:"Unit kerja wajib dipilih."});return}O.value=!0;try{const U=!!u.value.id,Aa=U?`${V}?id=${u.value.id}`:V,S=new URLSearchParams;S.set("nama",l),S.set("jenis",i),S.set("kanal",r),S.set("sla_hari",m),S.set("unit_kerja",I?.nama??""),c&&S.set("status_layanan",c),K!=null&&S.set("id_unit_kerja",String(K)),S.set("valid","0"),await C(Aa,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:S.toString()}),await h.fire({icon:"success",title:"Berhasil!",text:U?"Data berhasil diubah!":"Data berhasil dikirim!"}),ra(),N(),await B(A.value.trim(),_.value)}catch(U){console.error("Gagal mengirim data:",U),h.fire({icon:"error",title:"Gagal",text:U instanceof Error?U.message:"Gagal mengirim data."})}finally{O.value=!1}}const ua={props:p,isSuperAdmin:a,checklistItems:$,kanalLayanan:aa,items:e,jenisKategori:L,dataRiwayat:j,unitKerja:G,loading:x,isSaving:O,modalTitle:E,searchNama:A,searchUnitKerja:_,apiBase:V,pageSizeOptions:ma,status_layananOptions:fa,get select2InitTimer(){return w},set select2InitTimer(l){w=l},getSelect2:J,readSelectValue:W,syncSelect2ToForm:q,syncSelect2ToSearch:ta,syncFormToModalSelect2:ea,initSelect2:H,scheduleSelect2Init:M,destroySelect2:na,historyStatusClass:ga,historyStatusLabel:ya,emptyForm:la,form:u,page:ba,pageSize:va,totalPages:ka,pageStartIndex:_a,pagedItems:ha,pages:wa,goFirst:pa,goPrev:ja,goNext:xa,goLast:Sa,goTo:La,modalRef:Q,modalDetail:Y,requestJson:C,setForm:N,statusBadgeClass:Ca,fetchList:B,fetchRiwayat:ia,fetchJenis:sa,fetchUnitKerja:oa,doSearch:Ua,showModal:X,hideModal:ra,showModalDetail:da,hideModalDetail:Ta,openAdd:Pa,openDetail:Ba,openEdit:Ka,hapusEdit:Na,save:Va,Button:Ja,TableCard:Oa,BaseModal:Ga};return Object.defineProperty(ua,"__isScriptSetup",{enumerable:!1,value:!0}),ua}}),Ha={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mb-3 text-center text-md-start gap-2"},Qa={class:"d-flex align-items-center justify-content-center justify-content-md-start gap-2"},Ya=["value"],Xa={class:"d-flex flex-column flex-md-row justify-content-center justify-content-md-end w-100 w-md-auto gap-2"},Za=["onKeydown"],$a=["value"],at={class:"table-responsive border rounded-4"},tt={class:"table text-nowrap mb-0 align-middle",id:"page"},et=["onClick"],nt=["onClick"],lt={class:"mt-3",style:{"overflow-x":"auto","-webkit-overflow-scrolling":"touch","scrollbar-width":"none",width:"100%"}},it={class:"d-flex justify-content-end","aria-label":"Pagination"},st={class:"pagination mb-0 flex-nowrap",style:{"white-space":"nowrap","min-width":"max-content"}},ot=["disabled"],rt=["disabled"],dt=["onClick"],ut={key:1,class:"page-link text-muted","aria-hidden":"true",style:{"pointer-events":"none",cursor:"default"}},ct=["disabled"],mt=["disabled"],ft={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mb-3 text-center text-md-start gap-2"},gt={class:"d-flex align-items-center justify-content-center justify-content-md-start gap-2"},yt=["value"],bt={class:"d-flex flex-column flex-md-row justify-content-center justify-content-md-end w-100 w-md-auto gap-2"},vt=["onKeydown"],kt=["value"],_t={class:"mt-3",style:{"overflow-x":"auto","-webkit-overflow-scrolling":"touch","scrollbar-width":"none",width:"100%"}},ht={class:"d-flex justify-content-end","aria-label":"Pagination"},wt={class:"pagination mb-0 flex-nowrap",style:{"white-space":"nowrap","min-width":"max-content"}},pt=["disabled"],jt=["disabled"],xt=["onClick"],St={key:1,class:"page-link text-muted","aria-hidden":"true",style:{"pointer-events":"none",cursor:"default"}},Lt=["disabled"],Ct=["disabled"],Ut=["value"],Tt={key:0,class:"mb-2"},Pt=["value"],Bt={class:"mb-2"},Kt={class:"mb-2"},Nt=["value"],Vt={class:"mb-2"},At=["value"],Mt={class:"mb-2"},Dt={key:1,class:"mb-2"},Et=["value"],It={class:"row g-4"},zt={class:"col-12 col-lg-12 validator-col-right"},Ft={class:"mb-3"},Rt={class:"d-flex flex-column gap-2"},Gt=["checked"],Ot={class:"form-check-label"},Jt={class:"validator-section mt-4"},Wt={class:"validator-history"},qt={key:0,class:"p-3 text-muted small"},Ht={class:"d-flex align-items-center gap-2 mb-2"},Qt={class:"text-muted small"},Yt={class:"badge bg-light text-dark border"},Xt={class:"d-flex align-items-start gap-2"},Zt={class:"small text-muted"};function $t(Z,n,p,a,$,aa){return o(),s(g,null,[T(a.TableCard,{loading:a.loading,isEmpty:a.items.length===0,title:"Data Layanan"},{actions:f(()=>[T(a.Button,{class:"btn bg-primary-subtle text-primary",onClick:a.openAdd},{default:f(()=>[...n[20]||(n[20]=[t("i",{class:"ti ti-plus"},null,-1),R(" Tambah ",-1)])]),_:1})]),empty:f(()=>[t("div",ft,[t("div",gt,[n[26]||(n[26]=t("label",{for:"zero_config_length",class:"mb-0"},"Tampilkan",-1)),v(t("select",{name:"zero_config_length",id:"zero_config_length",class:"form-control w-auto js-select2","onUpdate:modelValue":n[7]||(n[7]=e=>a.pageSize=e)},[(o(),s(g,null,y(a.pageSizeOptions,e=>t("option",{key:e,value:e},d(e),9,yt)),64))],512),[[P,a.pageSize,void 0,{number:!0}]])]),t("div",bt,[v(t("input",{type:"text",name:"cari_layanan",placeholder:"Cari Nama Layanan ...",class:"form-control w-100 w-md-20","onUpdate:modelValue":n[8]||(n[8]=e=>a.searchNama=e),onKeydown:ca(z(a.doSearch,["prevent"]),["enter"])},null,40,vt),[[F,a.searchNama,void 0,{trim:!0}]]),a.isSuperAdmin?v((o(),s("select",{key:0,class:"form-control w-100 w-md-20 js-select2","data-search-field":"unit_kerja","onUpdate:modelValue":n[9]||(n[9]=e=>a.searchUnitKerja=e)},[n[27]||(n[27]=t("option",{value:null},"Cari Unit Kerja",-1)),(o(!0),s(g,null,y(a.unitKerja,e=>(o(),s("option",{key:e.id,value:e.id},d(e.nama),9,kt))),128))],512)),[[P,a.searchUnitKerja,void 0,{number:!0}]]):D("",!0)])]),n[28]||(n[28]=t("div",{class:"table-responsive border rounded-4"},[t("table",{class:"table text-nowrap mb-0 align-middle",id:"page"},[t("thead",{class:"table-primary"},[t("tr",null,[t("th",null,"No"),t("th",null,"Nama Layanan"),t("th",null,"Jenis Layanan"),t("th",null,"Penyelesaian"),t("th",null,"Status"),t("th",null,"Aksi")])]),t("tbody",null,[t("tr",null,[t("td",{colspan:"7",class:"text-center"},[t("div",{class:"text-center text-muted py-1"},"Belum ada Layanan")])])])])],-1)),t("div",_t,[t("nav",ht,[t("ul",wt,[t("li",{class:k(["page-item",{disabled:a.page===1}])},[t("button",{type:"button",class:"page-link",onClick:n[10]||(n[10]=(...e)=>a.goFirst&&a.goFirst(...e)),disabled:a.page===1}," « ",8,pt)],2),t("li",{class:k(["page-item",{disabled:a.page===1}])},[t("button",{type:"button",class:"page-link",onClick:n[11]||(n[11]=(...e)=>a.goPrev&&a.goPrev(...e)),disabled:a.page===1}," ‹ ",8,jt)],2),(o(!0),s(g,null,y(a.pages,(e,L)=>(o(),s("li",{key:"p-"+L,class:k(["page-item",{active:e===a.page}])},[e!==null?(o(),s("button",{key:0,type:"button",class:"page-link",onClick:j=>a.goTo(e)},d(e),9,xt)):(o(),s("span",St," … "))],2))),128)),t("li",{class:k(["page-item",{disabled:a.page===a.totalPages}])},[t("button",{type:"button",class:"page-link",onClick:n[12]||(n[12]=(...e)=>a.goNext&&a.goNext(...e)),disabled:a.page===a.totalPages}," › ",8,Lt)],2),t("li",{class:k(["page-item",{disabled:a.page===a.totalPages}])},[t("button",{type:"button",class:"page-link",onClick:n[13]||(n[13]=(...e)=>a.goLast&&a.goLast(...e)),disabled:a.page===a.totalPages}," » ",8,Ct)],2)])])])]),default:f(()=>[t("div",Ha,[t("div",Qa,[n[21]||(n[21]=t("label",{for:"zero_config_length",class:"mb-0"},"Tampilkan",-1)),v(t("select",{class:"form-control w-auto js-select2","onUpdate:modelValue":n[0]||(n[0]=e=>a.pageSize=e)},[(o(),s(g,null,y(a.pageSizeOptions,e=>t("option",{key:e,value:e},d(e),9,Ya)),64))],512),[[P,a.pageSize,void 0,{number:!0}]])]),t("div",Xa,[v(t("input",{type:"text",name:"cari_layanan",placeholder:"Cari Nama Layanan ...",class:"form-control w-100 w-md-20","onUpdate:modelValue":n[1]||(n[1]=e=>a.searchNama=e),onKeydown:ca(z(a.doSearch,["prevent"]),["enter"])},null,40,Za),[[F,a.searchNama,void 0,{trim:!0}]]),a.isSuperAdmin?v((o(),s("select",{key:0,class:"form-control w-100 w-md-20 js-select2","data-search-field":"unit_kerja","onUpdate:modelValue":n[2]||(n[2]=e=>a.searchUnitKerja=e)},[n[22]||(n[22]=t("option",{value:null},"Cari Unit Kerja",-1)),(o(!0),s(g,null,y(a.unitKerja,e=>(o(),s("option",{key:e.id,value:e.id},d(e.nama),9,$a))),128))],512)),[[P,a.searchUnitKerja,void 0,{number:!0}]]):D("",!0)])]),t("div",at,[t("table",tt,[n[25]||(n[25]=t("thead",{class:"table-primary"},[t("tr",null,[t("th",null,"No"),t("th",null,"Nama Layanan"),t("th",null,"Jenis Layanan"),t("th",null,"Penyelesaian"),t("th",null,"Status"),t("th",null,"Aksi")])],-1)),t("tbody",null,[(o(!0),s(g,null,y(a.pagedItems,(e,L)=>(o(),s("tr",{key:e.id},[t("td",null,d(a.pageStartIndex+L+1),1),t("td",null,d(e.nama),1),t("td",null,d(e.jenis),1),t("td",null,d(e.sla_hari),1),t("td",null,[t("span",{class:k(["badge",a.statusBadgeClass(e.status_layanan)]),onClick:j=>a.openDetail(e)},d(e.status_layanan),11,et)]),t("td",null,[a.isSuperAdmin||e.status_layanan!=="Aktif"?(o(),s("button",{key:0,type:"button",class:"btn btn-sm btn-warning text-white me-2",onClick:j=>a.openEdit(e.id)},[...n[23]||(n[23]=[t("i",{class:"ti ti-edit fs-4"},null,-1)])],8,nt)):D("",!0),T(a.Button,{class:"btn btn-sm btn-danger text-white",onClick:j=>a.hapusEdit(e.id)},{default:f(()=>[...n[24]||(n[24]=[t("i",{class:"ti ti-trash fs-4"},null,-1)])]),_:1},8,["onClick"])])]))),128))])])]),t("div",lt,[t("nav",it,[t("ul",st,[t("li",{class:k(["page-item",{disabled:a.page===1}])},[t("button",{type:"button",class:"page-link",onClick:n[3]||(n[3]=(...e)=>a.goFirst&&a.goFirst(...e)),disabled:a.page===1},"«",8,ot)],2),t("li",{class:k(["page-item",{disabled:a.page===1}])},[t("button",{type:"button",class:"page-link",onClick:n[4]||(n[4]=(...e)=>a.goPrev&&a.goPrev(...e)),disabled:a.page===1},"‹",8,rt)],2),(o(!0),s(g,null,y(a.pages,(e,L)=>(o(),s("li",{key:"p-"+L,class:k(["page-item",{active:e===a.page}])},[e!==null?(o(),s("button",{key:0,type:"button",class:"page-link",onClick:j=>a.goTo(e)},d(e),9,dt)):(o(),s("span",ut,"…"))],2))),128)),t("li",{class:k(["page-item",{disabled:a.page===a.totalPages}])},[t("button",{type:"button",class:"page-link",onClick:n[5]||(n[5]=(...e)=>a.goNext&&a.goNext(...e)),disabled:a.page===a.totalPages},"›",8,ct)],2),t("li",{class:k(["page-item",{disabled:a.page===a.totalPages}])},[t("button",{type:"button",class:"page-link",onClick:n[6]||(n[6]=(...e)=>a.goLast&&a.goLast(...e)),disabled:a.page===a.totalPages},"»",8,mt)],2)])])])]),_:1},8,["loading","isEmpty"]),T(a.BaseModal,{title:a.modalTitle,ref:"modalRef"},{closeButton:f(()=>[t("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:a.hideModal})]),formModal:f(()=>[t("form",{onSubmit:z(a.save,["prevent"]),id:"form-unit-kerja"},[t("input",{type:"hidden",value:a.form.id??""},null,8,Ut),a.isSuperAdmin?(o(),s("div",Tt,[n[30]||(n[30]=t("label",{class:"form-label"},"Unit Kerja",-1)),v(t("select",{id:"modal-select-unit-kerja","data-form-field":"id_unit_kerja",class:"form-control js-select2","onUpdate:modelValue":n[14]||(n[14]=e=>a.form.id_unit_kerja=e)},[n[29]||(n[29]=t("option",{value:null},"Pilih Unit Kerja",-1)),(o(!0),s(g,null,y(a.unitKerja,e=>(o(),s("option",{key:e.id,value:e.id},d(e.nama),9,Pt))),128))],512),[[P,a.form.id_unit_kerja,void 0,{number:!0}]])])):D("",!0),t("div",Bt,[n[31]||(n[31]=t("label",{class:"form-label"},"Nama Layanan",-1)),v(t("input",{type:"text",class:"form-control",placeholder:"Layanan ...","onUpdate:modelValue":n[15]||(n[15]=e=>a.form.nama=e)},null,512),[[F,a.form.nama,void 0,{trim:!0}]])]),t("div",Kt,[n[33]||(n[33]=t("label",{class:"form-label"},"Jenis Layanan",-1)),v(t("select",{id:"modal-select-jenis","data-form-field":"jenis",class:"form-control js-select2","onUpdate:modelValue":n[16]||(n[16]=e=>a.form.jenis=e)},[n[32]||(n[32]=t("option",{value:""},"Pilih Jenis Layanan",-1)),(o(!0),s(g,null,y(a.jenisKategori,e=>(o(),s("option",{key:e.id,value:e.kategori},d(e.kategori),9,Nt))),128))],512),[[P,a.form.jenis]])]),t("div",Vt,[n[35]||(n[35]=t("label",{class:"form-label"},"Kanal Layanan",-1)),v(t("select",{id:"modal-select-kanal","data-form-field":"kanal",class:"form-control js-select2","onUpdate:modelValue":n[17]||(n[17]=e=>a.form.kanal=e)},[n[34]||(n[34]=t("option",{value:""},"Pilih Kanal Layanan",-1)),(o(),s(g,null,y(a.kanalLayanan,e=>t("option",{key:e.value,value:e.value},d(e.value),9,At)),64))],512),[[P,a.form.kanal]])]),t("div",Mt,[n[36]||(n[36]=t("label",{class:"form-label"},"Penyelesaian",-1)),v(t("input",{type:"number",class:"form-control",placeholder:"Penyelesaian","onUpdate:modelValue":n[18]||(n[18]=e=>a.form.sla_hari=e)},null,512),[[F,a.form.sla_hari,void 0,{trim:!0}]])]),a.isSuperAdmin?(o(),s("div",Dt,[n[37]||(n[37]=t("label",{class:"form-label"},"Status Layanan",-1)),v(t("select",{id:"modal-select-status","data-form-field":"status_layanan",class:"form-control js-select2","onUpdate:modelValue":n[19]||(n[19]=e=>a.form.status_layanan=e)},[(o(),s(g,null,y(a.status_layananOptions,e=>t("option",{key:e.value,value:e.value},d(e.label),9,Et)),64))],512),[[P,a.form.status_layanan,void 0,{trim:!0}]])])):D("",!0)],32)]),footerModal:f(()=>[T(a.Button,{class:"btn bg-primary-subtle text-primary",onClick:a.save,loading:a.isSaving},{default:f(()=>[...n[38]||(n[38]=[R("Simpan",-1)])]),_:1},8,["loading"]),T(a.Button,{class:"btn bg-danger-subtle text-danger",onClick:a.hideModal},{default:f(()=>[...n[39]||(n[39]=[R("Tutup",-1)])]),_:1})]),_:1},8,["title"]),T(a.BaseModal,{title:a.modalTitle,ref:"modalDetail"},{closeButton:f(()=>[t("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:a.hideModalDetail})]),formModal:f(()=>[t("form",{onSubmit:z(a.save,["prevent"]),id:"form-unit-kerja"},[t("div",It,[t("div",zt,[t("div",Ft,[n[40]||(n[40]=t("label",{class:"form-label"},"Checklist Verifikasi",-1)),t("div",Rt,[(o(),s(g,null,y(a.checklistItems,e=>t("label",{key:e.key,class:"form-check d-flex align-items-center gap-2"},[t("input",{class:"form-check-input",checked:String(a.form[e.key])==="1",disabled:!0,type:"checkbox"},null,8,Gt),t("span",Ot,d(e.label),1)])),64))])])])]),t("div",Jt,[n[41]||(n[41]=t("label",{class:"form-label mb-2"},"Riwayat Validasi",-1)),t("div",Wt,[a.dataRiwayat.length===0?(o(),s("div",qt,"Belum ada riwayat.")):(o(!0),s(g,{key:1},y(a.dataRiwayat,e=>(o(),s("div",{key:e.id,class:"riwayat-item p-3"},[t("div",Ht,[t("span",Qt,d(e.tanggal)+" "+d(e.waktu),1),t("span",Yt,d(e.user),1)]),t("div",Xt,[t("span",{class:k(["badge",a.historyStatusClass(e.status_layanan)])},d(a.historyStatusLabel(e.status_layanan)),3),t("div",Zt,d(e.catatan||"-"),1)])]))),128))])])],32)]),footerModal:f(()=>[T(a.Button,{class:"btn bg-danger-subtle text-danger",onClick:a.hideModalDetail},{default:f(()=>[...n[42]||(n[42]=[R("Tutup",-1)])]),_:1})]),_:1},8,["title"])],64)}const le=Wa(qa,[["render",$t]]);export{le as default};
