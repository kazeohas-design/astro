import{d as k,c as p,a as f,b as a,e as g,t as w,w as v,v as _,f as x,F as S,r as l,o as m}from"./runtime-dom.esm-bundler.CUj3j_Ug.js";import{_ as U}from"./_plugin-vue_export-helper.DlAUqK2U.js";const C=k({__name:"LoginAmal",setup(y,{expose:e}){e();const n=l(""),s=l(""),r=l(""),i=l(!1);async function o(d,u){const t=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});let b=null;try{b=await t.json()}catch{}return{ok:t.ok,status:t.status,data:b}}async function h(){if(r.value="",!n.value||!s.value){r.value="Username dan password wajib diisi.";return}i.value=!0;const{ok:d,status:u,data:t}=await o("/api/backend/login",{username:n.value,password:s.value});if(i.value=!1,!d){r.value=t?.message||(u===401?"Username atau password salah.":"Login gagal");return}window.location.href=t?.redirect||"/dashboard"}const c={username:n,password:s,error:r,loading:i,postJSON:o,login:h};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),N={key:0,class:"alert alert-danger alert-dismissible bg-danger text-white border-0 fade show",role:"alert"},V={class:"mb-3"},j={class:"input-group login-input"},L={class:"mb-3"},O={class:"input-group login-input"},P=["disabled"],T={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"};function B(y,e,n,s,r,i){return m(),p(S,null,[s.error?(m(),p("div",N,[a("button",{type:"button",class:"btn-close btn-close-white","aria-label":"Close",onClick:e[0]||(e[0]=o=>s.error="")}),g(" "+w(s.error),1)])):f("",!0),a("form",{onSubmit:x(s.login,["prevent"]),novalidate:""},[a("div",V,[e[4]||(e[4]=a("label",{for:"username",class:"form-label visually-hidden"},"Username",-1)),a("div",j,[e[3]||(e[3]=a("span",{class:"input-group-text"},[a("i",{class:"ti ti-user"})],-1)),v(a("input",{id:"username",type:"text",class:"form-control",placeholder:"Username","onUpdate:modelValue":e[1]||(e[1]=o=>s.username=o),autocomplete:"username",required:""},null,512),[[_,s.username,void 0,{trim:!0}]])])]),a("div",L,[e[6]||(e[6]=a("label",{for:"password",class:"form-label visually-hidden"},"Password",-1)),a("div",O,[e[5]||(e[5]=a("span",{class:"input-group-text"},[a("i",{class:"ti ti-lock"})],-1)),v(a("input",{id:"password",type:"password",class:"form-control",placeholder:"Password","onUpdate:modelValue":e[2]||(e[2]=o=>s.password=o),autocomplete:"current-password",required:""},null,512),[[_,s.password]])])]),a("button",{type:"submit",class:"btn btn-primary w-100 py-8 mb-3 rounded-2 login-submit",disabled:s.loading},[s.loading?(m(),p("span",T)):f("",!0),g(" "+w(s.loading?"Memproses...":"Login"),1)],8,P)],32)],64)}const A=U(C,[["render",B]]);export{A as default};
